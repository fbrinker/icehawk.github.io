<!doctype html>
<html lang="en">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<title>Request data | IceHawk | PHP micro framework respecting CQRS</title>
	<meta name="description" content="IceHawk request data - components documentation">
	<meta name="keywords" content="IceHawk, request, data, documentation">
	<meta name="HandheldFriendly" content="True"/>
	<meta name="geo.region" content="DE-SN"/>
	<meta name="geo.placename" content="Dresden"/>
	<meta name="geo.position" content="51.052088;13.741672"/>
	<meta name="ICBM" content="51.052088, 13.741672"/>
	<meta name="twitter:site" content="https://twitter.com/hollodotme">
	<meta name="twitter:creator" content="@hollodotme">
	<script type="application/ld+json">{
  "@context" : "http://schema.org",
  "@type": "Person",
  "name": "IceHawk framework",
  "image": "https://icehawk.github.io/images/logo_121x100.png",
  "url": "https://icehawk.github.io",
  "sameAs" : [
      "https://twitter.com/hollodotme",
      "https://www.xing.com/profile/Holger_Woltersdorf",
      "https://github.com/icehawk"
    ]
  }
}</script>
	<meta property="article:author" content="https://www.xing.com/profile/Holger_Woltersdorf"/>
	<meta property="article:publisher" content="https://www.xing.com/profile/Holger_Woltersdorf"/>
	<link rel="apple-touch-icon" sizes="57x57" href="https://icehawk.github.io/images/favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="https://icehawk.github.io/images/favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="https://icehawk.github.io/images/favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="https://icehawk.github.io/images/favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="https://icehawk.github.io/images/favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://icehawk.github.io/images/favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="https://icehawk.github.io/images/favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://icehawk.github.io/images/favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="https://icehawk.github.io/images/favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192" href="https://icehawk.github.io/images/favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="https://icehawk.github.io/images/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="https://icehawk.github.io/images/favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://icehawk.github.io/images/favicon/favicon-16x16.png">
	<link rel="manifest" href="https://icehawk.github.io/images/favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="https://icehawk.github.io/images/favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	<link rel="canonical" href="https://icehawk.github.io/docs/icehawk/request-data.html"/>
	<meta name="referrer" content="origin"/>

	<meta property="og:site_name" content="IceHawk | PHP micro framework respecting CQRS"/>
	<meta property="og:type" content="article"/>
	<meta property="og:title" content="Request data | IceHawk | PHP micro framework respecting CQRS"/>
	<meta property="og:description" content="IceHawk request data - components documentation"/>
	<meta property="og:url" content="https://icehawk.github.io/docs/icehawk/request-data.html"/>
	<meta property="og:image" content="https://icehawk.github.io/images/logo_121x100.png"/>
	<meta property="article:published_time" content="2016-11-02T00:17:49+01:00"/>
	<meta property="article:modified_time" content="2016-11-02T00:17:49+01:00"/>
			<meta property="article:tag" content="IceHawk"/>
			<meta property="article:tag" content="request"/>
			<meta property="article:tag" content="data"/>
			<meta property="article:tag" content="documentation"/>
		<meta name="twitter:card" content="summary_large_image"/>
	<meta name="twitter:title" content="Request data | IceHawk | PHP micro framework respecting CQRS"/>
	<meta name="twitter:description" content="IceHawk request data - components documentation"/>
	<meta name="twitter:url" content="https://icehawk.github.io/docs/icehawk/request-data.html"/>
	<meta name="twitter:image:src" content="https://icehawk.github.io/images/logo_121x100.png"/>

	<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "IceHawk framework",
    "author": {
        "@type": "Person",
        "name": "Holger Woltersdorf",
        "image": "https://icehawk.github.io/images/hwoltersdorf.png",
        "url": "https://github.com/hollodotme",
        "sameAs": "https://twitter.com/hollodotme",
        "description": "CIO at Fortuneglobe GmbH, Head of Fortune Solutions, Husband, Father, PHP Dev with heart, board member of PHP USERGROUP DRESDEN e.V."
    },
    "headline": "Request data | IceHawk | PHP micro framework respecting CQRS",
    "url": "https://icehawk.github.io/docs/icehawk/request-data.html",
    "datePublished": "2016-11-02T00:17:49+01:00",
    "dateModified": "2016-11-02T00:17:49+01:00",
    "image": "https://icehawk.github.io/images/logo_121x100.png",
    "keywords": "IceHawk, request, data, documentation",
    "description": "IceHawk request data - components documentation"
}</script>

	<meta name="generator" content="IceHawk Static Page Generator"/>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://icehawk.github.io/css/webfont.css">
	<link rel="stylesheet" href="https://icehawk.github.io/css/hljs/tomorrow-night-bright.css">
	<link rel="stylesheet" href="https://icehawk.github.io/css/main.css">
</head>
<body>

<div class="page-container">

	<!-- top navbar -->
	<a class="navbar-brand" href="/">
		<img alt="IceHawk" src="https://icehawk.github.io/images/logo_121x100.png">
	</a>
	<div id="top-navigation" role="navigation">
		<div class="container">
			<div class="left-nav">
				<h3 class="visible-xs visible-sm hidden-md hidden-lg">
					<a href="#" data-toggle="offcanvas" data-target=".sidebar-nav">
						<i class="fa fa-bars"></i>
					</a>
				</h3>
				<h1 class="h4 hidden-xs hidden-sm visible-md visible-lg">
					<span class="brand">IceHawk framework</span><br>
					<small>A micro-framework respecting CQRS - written for PHP 7</small>
				</h1>
			</div>
			<div class="right-nav text-right">
				<ul class="hidden-xs hidden-sm">
					<li>
						<a href="https://gitter.im/icehawk/Lobby?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge" target="_blank" title="Join our chat on Gitter">
							<img src="https://badges.gitter.im/icehawk/icehawk.svg" class="img-responsive">
						</a>
					</li>
					<li>
						<a href="https://github.com/icehawk/icehawk.github.io" target="_blank">
							Help us improve the docs
						</a>
					</li>
					<li>
						<a href="https://github.com/icehawk" target="_blank" title="Source code on github">
							<i class="fa fa-github"></i>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div id="top-fader"></div>

	<div class="container">

		<div class="row hidden-xs hidden-sm">

			<div class="col-md-12 col-lg-12">
				<ul class="breadcrumb hidden-xs hidden-sm">
											<li>
							<a href="https://icehawk.github.io/index.html">Home</a>
						</li>
											<li>
							<a href="https://icehawk.github.io/docs.html">Documentation</a>
						</li>
											<li>
							<a href="https://icehawk.github.io/docs/icehawk.html">IceHawk</a>
						</li>
											<li class="active">
							<a href="https://icehawk.github.io/docs/icehawk/request-data.html">Request data</a>
						</li>
									</ul>
			</div>

		</div>

		<div class="row row-offcanvas row-offcanvas-left">

			<!-- sidebar -->
			<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
				<ul class="nav">
					
								<li>
		<a href="https://icehawk.github.io/components.html">Components</a>
			</li>


					
								<li class="active">
		<a href="https://icehawk.github.io/docs.html">Documentation</a>
					<ul class="nav">
															<li class="active">
		<a href="https://icehawk.github.io/docs/icehawk.html">IceHawk</a>
					<ul class="nav">
															<li>
		<a href="https://icehawk.github.io/docs/icehawk/installation.html">Installation</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/configuration.html">Configuration</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/delegation.html">Delegation</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/routing.html">Routing</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/request-information.html">Request information</a>
			</li>

											<li class="active">
		<a href="https://icehawk.github.io/docs/icehawk/request-data.html">Request data</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/request-handlers.html">Request handlers</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/events-and-subscribers.html">Events and subscribers</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/exceptions.html">Exceptions</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/final-responding.html">Final responding</a>
			</li>

							</ul>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/session.html">Session</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/forms.html">Forms</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/pubsub.html">PubSub</a>
			</li>

							</ul>
			</li>


					
								<li>
		<a href="https://icehawk.github.io/coverage.html">Code coverage</a>
			</li>


					
								<li>
		<a href="https://icehawk.github.io/metrics.html">Metrics</a>
			</li>


					
								<li>
		<a href="https://icehawk.github.io/media.html">Media</a>
			</li>


									</ul>
			</div>

			<!-- main area -->
			<div class="col-xs-12 col-sm-9" id="mainstage">

				<h1>IceHawk request data</h1>
<p>You may noticed that so far the separated handling of read and write side does not differ that much.
But when it comes to request data, you'll see the big difference.</p>
<p>This documentation explains the way IceHawk provides you the request data on each side - read and write.</p>
<h2>Preamble</h2>
<p>Before we discuss how to access request input data, lets briefly talk about data types in request input data.</p>
<h3>What data types do I get?</h3>
<p>If we break down what kind of data types a request input value can be, we will result in the following three types:</p>
<ul>
<li><code>string</code>: for all scalar values<br />
Yes, also a number (int or float) is a string in the query <em>string</em> in the first place. There is no such thing like autocasting request input values in PHP.</li>
<li><code>array</code>: for structured values<br />
An array is the only data structure that is automatically unpacked from a query string in PHP. All other structures (e.g. JSON) remain strings and must be unpacked manually.  </li>
<li><code>null</code>: for not existing keys/values<br />
Well, technically you can not submit <code>null</code> as a request input value, but it makes sense to use this &quot;type&quot; for not existing request input keys/values,
because it should not be an empty string or array, which can be valid values for an existing key.
We actually don't have any information about the value at all. So <code>null</code> is the absence of everything and indicates that the key and value you want to access do not exist.  </li>
</ul>
<p>This behaviour is reflected by the basic method for accessing a request input value:</p>
<pre><code class="language-php">/**
 * @param string            $key
 * @param string|array|null $default
 *
 * @return string|array|null
 */
public function get( string $key, $default = null )
{
    return $this-&gt;data[ $key ] ?? $default;
}</code></pre>
<h2>The read request data</h2>
<p>As you can see in the <a href="https://icehawk.github.io/docs/icehawk/request-handlers.html">request handlers section</a> the IceHawk component provides a request data object to the request handler.
This object carries the <a href="https://icehawk.github.io/docs/icehawk/request-information.html">request information</a> and the request input data.</p>
<p>This example shows how you can access the request input data inside a GET request handler:</p>
<pre><code class="language-php">class YourGetRequestHandler implements HandlesGetRequest
{
    public function handle( ProvidesReadRequestData $request )
    {
        # Get the request input data
        $requestInput = $request-&gt;getInput();
    }
}</code></pre>
<p>The <code>$requestInput</code> object retrieved in the example above is an instance of the
<a href="https://github.com/icehawk/icehawk/blob/v2.0.1/src/Requests/ReadRequestInput.php">ReadRequestInput class</a>.</p>
<p>This class is a wrapper of the superglobal <code>$_GET</code> variable and offers two ways to access its data:</p>
<h3>1. Get a single value</h3>
<p>Assuming we have the following query string:</p>
<pre><code class="language-http">?galleryId=4711&amp;filters[price]=19900&amp;filters[weight]=2.5&amp;page=</code></pre>
<p>PHP will unpack this query string to the following <code>$_GET</code> array:</p>
<pre><code class="language-php">Array
(
    [galleryId] =&gt; 4711
    [filters] =&gt; Array
        (
            [price] =&gt; 19900
            [weight] =&gt; 2.5
        )

    [page] =&gt;
)</code></pre>
<p>Now let's access the single values:</p>
<pre><code class="language-php">&lt;?php

$galleryId = $requestInput-&gt;get( 'galleryId' );
var_dump( $galleryId );

$filers = $requestInput-&gt;get( 'filters' );
var_dump( $filters );

$page = $request-&gt;get( 'page' );
var_dump( $page );

$limit = $request-&gt;get( 'limit' ); # key doesn't exist!
var_dump( $limit );</code></pre>
<p>This will print:</p>
<pre><code class="language-php">string(4) "4711"        # $galleryId

array(2) {              # $filters
  'price' =&gt;
  string(5) "19900"
  'weight' =&gt;
  string(3) "2.5"
}

string(0) ""            # $page

NULL                    # $limit</code></pre>
				<div id="footer" class="row small">
					<div class="col-xs-12 col-sm-12 col-md-3 text-center">
						<span class="text-muted">
							Generated with <a class="text-muted" href="https://github.com/icehawk/static-page-generator" target="_blank">
								IceHawk <abbr title="Static Page Generator">SPG</abbr>
							</a>
						</span>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-3 text-center">
						<i class="fa fa-github text-muted"></i>
						<a href="https://github.com/icehawk" class="text-muted" target="_blank">Source code on github</a>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-3 text-center">
						<i class="fa fa-comments-o text-muted"></i>
						<a href="https://gitter.im/icehawk/Lobby" class="text-muted" target="_blank">Chat with us on gitter</a>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-3 text-center">
						<i class="fa fa-exclamation-circle text-muted"></i>
						<a href="https://github.com/icehawk/icehawk.github.io/issues" class="text-muted" target="_blank">Report an issue</a>
					</div>
				</div>

			</div><!-- /.col-xs-12 main -->
		</div><!--/.row-->
	</div><!--/.container-->

	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://use.fontawesome.com/2add9a8fb5.js" async="async"></script>
	<script type="text/javascript" src="https://icehawk.github.io/js/highlight.pack.js" async="async"></script>
	<script type="text/javascript" src="https://icehawk.github.io/js/main.js" async="async"></script>
	
</div><!--/.page-container-->
</body>
</html>
